diff --git a/Makefile b/Makefile
index 236f76c..a41ad11 100644
--- a/Makefile
+++ b/Makefile
@@ -12,13 +12,23 @@ VERSION=HEAD
 PACKAGE_NAME=rfc4627_jsonrpc
 EZ_NAME=$(PACKAGE_NAME).ez
 
-## The path to httpd.hrl has changed in OTP R14A and newer. Detect the
-## change, and supply a compile-time macro definition to allow
-## rfc4627_jsonrpc_inets.erl to adapt to the new path.
-ifeq ($(shell test R14A \> $$(erl -noshell -eval 'io:format(erlang:system_info(otp_release)), halt().') && echo yes),yes)
-INETS_DEF=
+## The path to httpd.hrl changed at R14A, and then changed again
+## between OTP R14B and R14B02. Detect the changes, and supply
+## compile-time macro definitions to allow rfc4627_jsonrpc_inets.erl
+## to adapt to the new paths.
+ERLANG_OTP_RELEASE:=$(shell erl -noshell -eval 'io:format(erlang:system_info(otp_release)), halt().')
+$(info Building for OTP release $(ERLANG_OTP_RELEASE).)
+ifeq ($(shell test R14A \> $(ERLANG_OTP_RELEASE) && echo yes),yes)
+$(info Using path to INETS httpd.hrl that existed before R14A.)
+INETS_DEF=-Dinets_pre_r14a
+else
+ifeq ($(shell test R14B02 \> $(ERLANG_OTP_RELEASE) && echo yes),yes)
+$(info Using path to INETS httpd.hrl that existed before R14B02.)
+INETS_DEF=-Dinets_pre_r14b02
 else
-INETS_DEF=-Dnew_inets
+$(info Using path to INETS httpd.hrl that exists in releases at and after R14B02.)
+INETS_DEF=
+endif
 endif
 
 all: package
diff --git a/src/rfc4627_jsonrpc_inets.erl b/src/rfc4627_jsonrpc_inets.erl
index 11331a0..47386bb 100644
--- a/src/rfc4627_jsonrpc_inets.erl
+++ b/src/rfc4627_jsonrpc_inets.erl
@@ -88,13 +88,17 @@
 -module(rfc4627_jsonrpc_inets).
 -include("rfc4627_jsonrpc.hrl").
 
-%% The path to httpd.hrl has changed in OTP R14A and newer. Our
-%% Makefile detects the change for us, and supplies a compile-time
-%% macro definition to allow us to adapt to the new path.
--ifdef(new_inets).
+%% The path to httpd.hrl has changed with various OTP releases. Our
+%% Makefile detects the changes for us, and supplies compile-time
+%% macro definitions to allow us to adapt.
+-ifdef(inets_pre_r14a).
+-include_lib("inets/src/httpd.hrl").
+-else.
+-ifdef(inets_pre_r14b02).
 -include_lib("inets/src/http_server/httpd.hrl").
 -else.
--include_lib("inets/src/httpd.hrl").
+-include_lib("inets/include/httpd.hrl").
+-endif.
 -endif.
 
 -export([do/1, load/2]).
